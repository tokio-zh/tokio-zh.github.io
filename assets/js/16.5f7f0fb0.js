(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{152:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v("Tokio是一个事件驱动的非阻塞I / O平台，用于使用Rust编程语言编写异步应用程序。在较高的层面上，它提供了一些主要组件：")]),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("这些组件提供构建异步应用程序所需的运行时组件。")]),t._v(" "),t._m(2),t._v(" "),a("p",[t._v("Tokio是基于Rust编程语言构建的，它本身非常快。使用Tokio构建的应用程序将获得同样的好处。 Tokio的设计也旨在使应用程序尽可能快。")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),a("p",[t._v("请注意，提供零成本抽象并不意味着Tokio本身没有成本。这意味着使用Tokio导致最终产品具有与不使用Tokio相同的开销。")]),t._v(" "),t._m(5),t._v(" "),a("p",[t._v("开箱即用，Tokio提供了一个多线程，工作窃取的调度程序。因此，当您使用tokio :: run开始使用应用程序时，您已经在使用所有计算机的CPU内核。")]),t._v(" "),a("p",[t._v("现代计算机通过添加内核来提高其性能，因此能够利用多个内核对于编写快速应用程序至关重要。")]),t._v(" "),t._m(6),t._v(" "),a("p",[t._v("当访问网络时，Tokio将使用操作系统可用的最有效系统。在Linux上，这意味着epoll，* bsd平台提供kqueue，Windows具有I / O完成端口。")]),t._v(" "),a("p",[t._v("这允许在单个线程上多路复用许多套接字并批量接收操作系统通知，从而减少系统调用。所有这些都可以减少应用程序的开销。")]),t._v(" "),t._m(7),t._v(" "),a("p",[t._v("虽然Tokio无法阻止所有错误，但它的目的是最小化它们。它通过提供难以滥用的API来实现这一点。在一天结束时，您可以放心地将应用程序运送到生产中。")]),t._v(" "),t._m(8),t._v(" "),a("p",[t._v("Rust的所有权模型和类型系统可以实现系统级应用程序，而不必担心内存不安全。它可以防止经典错误，例如访问未初始化的内存并免费使用。它在不添加任何运行时开销的情况下执行此操作。")]),t._v(" "),a("p",[t._v("此外，API能够利用类型系统来提供难以滥用的API。例如，Mutex不要求用户明确解锁：")]),t._v(" "),t._m(9),t._m(10),t._v(" "),a("p",[t._v("在基于推送的系统中，当生产者生成的数据快于消费者可以处理的数据时，数据将开始备份。待处理数据存储在内存中。除非生产者停止生产，否则系统最终会耗尽内存并崩溃。消费者通知生产者减速的能力是背压。")]),t._v(" "),a("p",[t._v("因为Tokio使用基于轮询的模型，所以问题大多消失了。生产者默认是懒惰的。除非消费者要求，否则他们不会产生任何数据。这是Tokio的基础。")]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),a("p",[t._v("Tokio可以很好地扩展，而不会增加应用程序的开销，使其能够在资源受限的环境中茁壮成长。")]),t._v(" "),t._m(15),t._v(" "),a("p",[t._v("因为Tokio是基于Rust构建的，所以编译后的可执行文件包含最少的语言运行时。最终产品类似于C ++将生成的产品。这意味着，没有垃圾收集器，没有虚拟机，没有JIT编译，也没有堆栈操作。编写您的服务器应用程序，而不必担心停止世界停顿。")]),t._v(" "),a("p",[t._v("可以使用Tokio而不会产生任何运行时分配，使其非常适合实时用例。")]),t._v(" "),t._m(16),t._v(" "),a("p",[t._v("虽然Tokio提供了很多开箱即用的功能，但它的组织非常模块化。每个组件都位于一个单独的库中。如果需要，应用程序可以选择挑选所需的组件，避免依赖其余组件。")]),t._v(" "),a("p",[t._v("例子:带有Tokio的基本TCP echo服务器：")]),t._v(" "),t._m(17),a("p",[t._v("更多例子在"),a("a",{attrs:{href:"https://github.com/tokio-rs/tokio/tree/master/examples",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),a("OutboundLink")],1)])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"何为tokio"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#何为tokio","aria-hidden":"true"}},[this._v("#")]),this._v(" 何为Tokio")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("基于多线程，工作窃取的任务调度程序。")]),this._v(" "),s("li",[this._v("由操作系统的事件队列（epoll，kqueue，IOCP等）支持的反应器。")]),this._v(" "),s("li",[this._v("异步TCP和UDP套接字。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"快速"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#快速","aria-hidden":"true"}},[this._v("#")]),this._v(" 快速")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"零成本抽象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#零成本抽象","aria-hidden":"true"}},[this._v("#")]),this._v(" 零成本抽象")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("Tokio以"),a("code",[t._v("Future")]),t._v("为基础。"),a("code",[t._v("Future")]),t._v("不是一个新主意，但Tokio使用它们的方式是独一无二的。与其他语言的"),a("code",[t._v("Future")]),t._v("不同，Tokio的"),a("code",[t._v("Future")]),t._v("编译成状态机。用"),a("code",[t._v("Future")]),t._v("实现常见的同步，分配或其他不会增加额外开销成本。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"并发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#并发","aria-hidden":"true"}},[this._v("#")]),this._v(" 并发")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"非阻塞i-o"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#非阻塞i-o","aria-hidden":"true"}},[this._v("#")]),this._v(" 非阻塞I/O")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"可靠"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可靠","aria-hidden":"true"}},[this._v("#")]),this._v(" 可靠")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"所有权和类型系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#所有权和类型系统","aria-hidden":"true"}},[this._v("#")]),this._v(" 所有权和类型系统")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" std"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("sync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("Mutex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("to_string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Mutex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" locked "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unwrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"locked data: {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("locked"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The lock is automatically released here when `locked` goes out of scope.")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"背压"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#背压","aria-hidden":"true"}},[this._v("#")]),this._v(" 背压")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"消除"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#消除","aria-hidden":"true"}},[this._v("#")]),this._v(" 消除")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("由于Tokio基于轮询的模型，除非对它们进行轮询，否则计算不起作用。该计算的依赖性持有表示该计算结果的"),s("code",[this._v("Future")]),this._v("。如果不再需要结果，则会删除"),s("code",[this._v("Future")]),this._v("。此时，将不再轮询计算，因此不再执行任何工作。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("由于Rust的所有权模型，计算能够实现drop handle以检测"),s("code",[this._v("Future")]),this._v("的droped。这允许它执行任何必要的清理工作。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"轻量级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#轻量级","aria-hidden":"true"}},[this._v("#")]),this._v(" 轻量级")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"没有垃圾收集器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#没有垃圾收集器","aria-hidden":"true"}},[this._v("#")]),this._v(" 没有垃圾收集器")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"模块化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块化","aria-hidden":"true"}},[this._v("#")]),this._v(" 模块化")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extern")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("crate")]),t._v(" tokio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" tokio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("prelude"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" tokio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("copy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" tokio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("TcpListener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Bind the server's socket.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" addr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1:12345"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unwrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" listener "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" TcpListener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("addr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"unable to bind TCP listener"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Pull out a stream of sockets for incoming connections")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("incoming")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map_err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("eprintln!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"accept failed = {:?}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("for_each")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token closure-params"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v("sock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Split up the reading and writing parts of the")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// socket.")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" writer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// A future that echos the data and returns how")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// many bytes were copied...")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" bytes_copied "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("copy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" writer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ... after which we'll print what happened.")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" handle_conn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bytes_copied"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token closure-params"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v("amt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wrote {:?} bytes"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map_err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token closure-params"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("eprintln!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"IO error {:?}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Spawn the future as a concurrent task.")]),t._v("\n            tokio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("spawn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handle_conn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Start the Tokio runtime")]),t._v("\n    tokio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])}],!1,null,null,null);s.default=e.exports}}]);
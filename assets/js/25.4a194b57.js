(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{161:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v('为了开始我们的Tokio之旅，我们先从我们必修的"hello world"示例开始。 这个程序将会创建一个TCP流并且写入＂hello,world＂到其中．这与写入非Tokio TCP流的Rust程序之间的区别在于该程序在创建流或者将"hello,world"的时候并不会阻塞程序的执行．')]),t._v(" "),a("p",[t._v("在开始之前你应该对TCP流的工作方式有一定的了解，相信理解"),a("a",{attrs:{href:"https://doc.rust-lang.org/std/net/struct.TcpStream.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("rust标准库"),a("OutboundLink")],1),t._v("实现会对你有很大的帮助")]),t._v(" "),a("p",[t._v("让我们开始吧。")]),t._v(" "),a("p",[t._v("首先，生成一个新的crate。")]),t._v(" "),t._m(1),a("p",[t._v("接下来，添加必要的依赖项：")]),t._v(" "),t._m(2),t._m(3),t._v(" "),t._m(4),a("p",[t._v("这里我们使用"),a("code",[t._v("tokio")]),t._v("自己"),a("a",{attrs:{href:"https://docs.rs/tokio/0.1/tokio/io/index.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("io")]),a("OutboundLink")],1),t._v("和"),a("a",{attrs:{href:"https://docs.rs/tokio/0.1/tokio/net/index.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("net")]),a("OutboundLink")],1),t._v("模块。这些模块提供与网络和I/O操作相同的抽象，与std相应的模块 有很小的差别; 所有操作都是异步执行的。")]),t._v(" "),t._m(5),t._v(" "),a("p",[t._v("第一步是创建TcpStream.我们将使用Tokio实现的TcpStream.")]),t._v(" "),t._m(6),a("p",[t._v("接下来，我们定义服务器任务。此异步任务将创建一个流，然后一旦它被用于其他的处理程序就生成流．")]),t._v(" "),t._m(7),a("p",[t._v("对"),a("code",[t._v("TcpStream :: connect")]),t._v("的调用返回创建的TCP流的"),a("a",{attrs:{href:"https://docs.rs/futures/0.1/futures/future/trait.Future.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Future")]),a("OutboundLink")],1),t._v("。我们将在后面的指南中详细了解["),a("code",[t._v("Futures")]),t._v("]，但是现在您可以将aFuture视为表示将来最终会发生的事情的值（在这种情况下将创建流）。这意味着"),a("code",[t._v("TcpStream :: connect")]),t._v("可以不等待它返回之前创建流。而是立即返回一个表示创建TCP流工作的值。当这项工作真正执行时，我们会在下面看到 。")]),t._v(" "),t._m(8),t._v(" "),a("p",[t._v('每个组合器函数都获得必要状态的所有权以及执行的回调，并返回具有附加"步骤"的新Future。这个Future是表示将在某个时间点完成的某些计算的值。')]),t._v(" "),a("p",[t._v('值得重申的是，返回的Future是懒惰的，即在调用组合子时不会执行任何工作。相反，一旦所有异步步骤都被排序，最终Future（表示整个任务）就"生成"（即运行）。这是先前定义的工作开始运行的时间。换句话说，到目前为止我们编写的代码实际上并没有创建TCP流。')]),t._v(" "),a("p",[t._v("稍后我们将更多地探讨futures（以及streams和sinks的相关概念）。")]),t._v(" "),t._m(9),t._v(" "),a("p",[t._v("接下来，我们将处理流。")]),t._v(" "),t._m(10),t._v(" "),a("p",[t._v('我们的目标是写入"hello world\\n"流。')]),t._v(" "),t._m(11),t._v(" "),t._m(12),a("p",[a("a",{attrs:{href:"https://docs.rs/tokio-io/0.1/tokio_io/io/fn.write_all.html/io/fn.write_all.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("io::write_all")]),a("OutboundLink")],1),t._v("函数获取"),a("code",[t._v("stream")]),t._v("的所有权，在整个消息写入后返回"),a("a",{attrs:{href:"https://docs.rs/futures/0.1/futures/future/trait.Future.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Future")]),a("OutboundLink")],1),t._v("完成流。 "),a("code",[t._v("then")]),t._v("用于对写入完成后运行的步骤进行排序。 在我们的例子中，我们只是向"),a("code",[t._v("STDOUT")]),t._v("写一条消息来表示写完了。")]),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),a("p",[t._v("执行程序负责调度异步任务，使其完成。有许多执行器实现可供选择，每个都有不同的优缺点。在此示例中，我们将使用"),a("code",[t._v("Tokio")]),t._v("运行时("),a("a",{attrs:{href:"https://docs.rs/tokio/0.1/tokio/runtime/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tokio runtime"),a("OutboundLink")],1),t._v(")的默认执行 程序。")]),t._v(" "),t._m(16),t._m(17),t._v(" "),t._m(18),t._v(" "),a("p",[t._v("你可以在这里"),a("a",{attrs:{href:"https://github.com/tokio-rs/tokio/blob/master/examples/hello_world.rs",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1),t._v("找到完整的例子。")]),t._v(" "),t._m(19),t._v(" "),a("p",[a("a",{attrs:{href:"http://netcat.sourceforge.net/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Netcat"),a("OutboundLink")],1),t._v("是一种从命令行快速创建TCP套接字的工具。以下命令在先前指定的端口上启动侦听TCP套接字。")]),t._v(" "),t._m(20),a("p",[t._v("在不同的终端，我们将运行我们的项目。")]),t._v(" "),t._m(21),t._m(22),t._v(" "),t._m(23),t._v(" "),a("p",[t._v("本指南的下一页将开始深入研究Tokio运行时模型。")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"hello-world"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hello-world","aria-hidden":"true"}},[this._v("#")]),this._v(" Hello World")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("$ cargo new --bin hello-world\n$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[this._v("cd")]),this._v(" hello-world\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("dependencies")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("tokio")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.1"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在"),s("code",[this._v("main.rs")]),this._v("中的引入包和类型：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extern")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("crate")]),t._v(" tokio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" tokio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" tokio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("TcpStream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" tokio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("prelude"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"创建流"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建流","aria-hidden":"true"}},[this._v("#")]),this._v(" 创建流")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Parse the address of whatever server we're talking to")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" addr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1:6142"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unwrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" stream "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" TcpStream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("addr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Following snippets come here...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" hello_world "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" TcpStream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("addr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("and_then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token closure-params"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v("stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"created stream"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Process stream here")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map_err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token closure-params"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// All tasks must have an 'Error' type of '()'. This forces error")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// handing and helps avoid silencing failures.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"connection error = {:?}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("and_then")]),this._v("方法在创建流后生成流。 "),s("code",[this._v("and_then")]),this._v("是一个组合函数的示例，用于定义如何处理异步工作。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("同样重要的是要注意，在我们实际运行未来之前，我们已经调用"),s("code",[this._v("map_err")]),this._v("来转换我们可能遇到的任何错误"),s("code",[this._v("()")]),this._v("。这可以确保我们承认错误。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"写入数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#写入数据","aria-hidden":"true"}},[this._v("#")]),this._v(" 写入数据")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("回到"),s("code",[this._v("TcpStream::connect(addr).and_then")]),this._v("块。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" client "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" TcpStream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("addr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("and_then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token closure-params"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v("stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"created stream"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write_all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token closure-params"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wrote to stream; success={:?}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("is_ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("注意"),s("code",[this._v("result")]),this._v("是一个包含原始流的"),s("code",[this._v("Result")]),this._v("。 这允许我们对相同的流进行附加读取或写入。 但是，我们没有其他任何事情要做，所以我们只删除流，然后自动关闭它。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"运行客户端任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行客户端任务","aria-hidden":"true"}},[this._v("#")]),this._v(" 运行客户端任务")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("到目前为止，我们已经"),s("code",[this._v("Future")]),this._v('代表了我们的程序要完成的工作，但我们实际上还没有运行它。我们需要一种方法来"产生"这种工作。我们需要一个执行者。')])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"About to create the stream and write to it..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntokio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Stream has been created and written to."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("tokio::run")]),this._v("启动运行时，阻止当前线程，直到所有生成的任务完成并且所有资源（如文件和套接字）都已被删除。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("到目前为止，我们只在执行程序上运行了一个任务，因此该"),s("code",[this._v("client")]),this._v("任务是阻止"),s("code",[this._v("run")]),this._v("返回的唯一任务。一旦"),s("code",[this._v("run")]),this._v("返回，我们可以确定我们的未来已经完成。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"运行代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行代码","aria-hidden":"true"}},[this._v("#")]),this._v(" 运行代码")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("nc")]),this._v(" -l -p "),s("span",{pre:!0,attrs:{class:"token number"}},[this._v("6142")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("$ cargo run\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果一切顺利，你应该看到"),s("code",[this._v("hello world")]),this._v("从"),s("code",[this._v("Netcat")]),this._v("打印出来。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"下一步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下一步","aria-hidden":"true"}},[this._v("#")]),this._v(" 下一步")])}],!1,null,null,null);s.default=e.exports}}]);